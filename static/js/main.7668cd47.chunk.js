(this["webpackJsonpsecbo-ts"]=this["webpackJsonpsecbo-ts"]||[]).push([[0],{10:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(3),i=a.n(s);a(8);const r=e=>`[secbo]${e}[/secbo]`.split("").map((e=>`${e.charCodeAt(0).toString(2)} `)).join(""),l=e=>{const t=(e=>e.split(" ").map((e=>String.fromCharCode(parseInt(e,2)))).join(""))(e.getImageData(0,0,e.canvas.width,e.canvas.height).data.reduce(((e,t,a)=>{if(a>0&&(a+1)%4===0){if(253===t){return`${e} `}if(254===t){return`${e}1`}if(255===t){return`${e}0`}}return e}),""));return t.startsWith("[secbo]")&&t.substring(0,t.length-1).endsWith("[/secbo]")?t.substring(7,t.length-9):null};var o=a(0);var c=({imageInfo:e,pixels:t,freePixels:a})=>Object(o.jsxs)("div",{className:"Details",children:[e.image&&`${t} total pixels, `,Object(o.jsx)("span",{style:{color:a>0?"black":"red"},children:e.image&&`${Math.abs(a)} ${a>0?"still available":"over the limit"}`})]});var d=e=>{const{updateCanvas:t,imageInfo:a,setImageInfo:n,readAlpha:s,textToBinary:i,fireAlert:r}=e;return Object(o.jsx)("div",{className:"ImageUploader",onDrop:e=>{e.preventDefault();const l=new FileReader,o=new Image,c=e.dataTransfer.files.item(0);c?("image/png"===c.type?l.readAsDataURL(c):r("Invalid format. Please use a PNG image."),l.onload=e=>{var r;o.onload=()=>{var e;t(o);const r=null!==(e=s())&&void 0!==e?e:"";n({...a,image:o,name:c.name,text:r,binary:i(r)})};const{result:l}=null!==(r=e.target)&&void 0!==r?r:{};"string"===typeof l&&(o.src=l)}):r("Something went wrong with the file upload.")},onDragEnter:e=>e.preventDefault(),onDragOver:e=>e.preventDefault(),children:a.image?Object(o.jsx)("img",{className:"ImagePreview",src:a.image.src,alt:"thumbnail"}):Object(o.jsx)("span",{children:"drag an image file here"})})};var g=({message:e="",dismiss:t})=>Object(o.jsxs)("div",{className:"UserAlert "+(e?"UaDescend":""),children:[e,e&&Object(o.jsx)("button",{type:"button",className:"Dismiss",onClick:()=>t(""),children:"\xd7"})]});var u=()=>{var e,t;const a=Object(n.useRef)(null),[s,i]=Object(n.useState)({text:"",binary:"",image:null,name:"",dl:""}),[u,h]=Object(n.useState)(0),[m,v]=Object(n.useState)(0),[b,j]=Object(n.useState)("");Object(n.useEffect)((()=>{if(null===s||void 0===s?void 0:s.image){const e=s.image.width*s.image.height,t=e-s.binary.length;h(e),v(t)}}),[s.text,s.binary,s.image]);const x=()=>{var e,t;return null!==(e=null===(t=a.current)||void 0===t?void 0:t.getContext("2d"))&&void 0!==e?e:(()=>{throw new Error("Context was null")})()};return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(g,{message:b,dismiss:j}),Object(o.jsx)("h2",{children:"secbo-ts"}),Object(o.jsx)("p",{children:"v 1.2.1"}),Object(o.jsx)(d,{updateCanvas:e=>{const t=x();t.canvas.width=e.width,t.canvas.height=e.height,t.drawImage(e,0,0)},imageInfo:s,setImageInfo:i,readAlpha:()=>l(x()),textToBinary:r,fireAlert:j}),(null===s||void 0===s||null===(e=s.image)||void 0===e?void 0:e.src)&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(c,{imageInfo:s,pixels:u,freePixels:m}),Object(o.jsx)("textarea",{rows:15,cols:50,value:s.text,onChange:e=>(e=>{var t,n;((e,t,a)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height);n.data.length/4>=t.length?(n.data.forEach(((e,t)=>{t>0&&(t+1)%4===0&&(n.data[t]=255)})),t.split("").forEach(((e,t)=>{"1"===e&&(n.data[4*t+3]=254)," "===e&&(n.data[4*t+3]=253)})),e.putImageData(n,0,0)):a("The image is too small to contain all this data.")})(x(),r(e.target.value),j),i({...s,text:e.target.value,binary:r(e.target.value),dl:null!==(t=null===(n=a.current)||void 0===n?void 0:n.toDataURL("image/png"))&&void 0!==t?t:""})})(e)})]}),s.text.length>0&&Object(o.jsx)("a",{role:"button",href:s.dl,download:s.name,children:"download"}),(null===s||void 0===s||null===(t=s.image)||void 0===t?void 0:t.src)&&Object(o.jsx)("button",{type:"button",onClick:()=>{i({text:"",binary:"\n  1011011 1110011 1100101 1100011 1100010 1101111 1011101\n  1011011 101111 1110011 1100101 1100011 1100010 1101111 1011101\n",image:null,name:"",dl:""})},children:"reset"}),Object(o.jsx)("canvas",{ref:a})]})};var h=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,11)).then((({getCLS:t,getFID:a,getFCP:n,getLCP:s,getTTFB:i})=>{t(e),a(e),n(e),s(e),i(e)}))};i.a.render(Object(o.jsx)(n.StrictMode,{children:Object(o.jsx)(u,{})}),document.getElementById("root")),h()},8:function(e,t,a){}},[[10,1,2]]]);
//# sourceMappingURL=main.7668cd47.chunk.js.map